server.port=6060
spring.application.name=resilience-producer-6060

eureka.client.serviceUrl.defaultZone=http://192.168.30.240:8761/eureka
eureka.instance.lease-renewal-interval-in-seconds=10
eureka.instance.lease-expiration-duration-in-seconds=30
eureka.client.registry-fetch-interval-seconds=10
eureka.client.healthcheck.enabled=true

management.endpoints.web.exposure.include=*
management.endpoint.health.show-details=always
management.info.env.enabled=true
# 啟用斷路器的健康指標
management.health.circuitbreakers.enabled=true

# Eureka /actuator/info
info.app.name=${spring.application.name}

# 斷路器的基本配置
# 啟用斷路器的健康指標註冊，允許通過監控端點查看斷路器的狀態
resilience4j.circuitbreaker.instances.employeeCircuitBreaker.registerHealthIndicator=true

# 設定滑動窗口的大小。這個窗口用於記錄呼叫的成功、失敗次數，進而決定是否觸發斷路
resilience4j.circuitbreaker.instances.employeeCircuitBreaker.slidingWindowSize=10

# 在斷路器考慮開啟之前必須執行的最小呼叫次數。這是為了避免在呼叫次數太少時就開啟斷路器
resilience4j.circuitbreaker.instances.employeeCircuitBreaker.minimumNumberOfCalls=5

# 斷路器開啟後，等待多久之後會進入半開狀態，允許一部分請求通過以檢測系統是否恢復正常。單位是毫秒
resilience4j.circuitbreaker.instances.employeeCircuitBreaker.waitDurationInOpenState=10000

# 觸發斷路的失敗率閾值。如果在滑動窗口期內的呼叫失敗率超過此值，則斷路器會開啟。以百分比表示，如 50 表示 50%
resilience4j.circuitbreaker.instances.employeeCircuitBreaker.failureRateThreshold=50

# 用於監聽和緩存斷路器事件的環形緩衝區的大小。這允許應用收集和監控斷路器的事件數據
resilience4j.circuitbreaker.instances.employeeCircuitBreaker.eventConsumerBufferSize=10
